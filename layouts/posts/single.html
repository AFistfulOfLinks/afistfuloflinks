{{ define "main" }}
{{ $tagsScratch := newScratch }}
<p class="edition">
Year {{ $.Page.Params.year }} - Edition {{ $.Page.Params.edition }}
<p>

{{ range $link := $.Page.Params.links }}
    {{ $linkref := print "/links/" $link }}
    {{ with $.Site.GetPage $linkref }}
        {{ partial "single-link" . }}

        {{ range $tag := .Param "tags" }}
            {{ if in ($tagsScratch.Get "tags") $tag }}
            {{ else }}
                {{ $tagsScratch.Add "tags" (slice $tag) }}
            {{ end }}
        {{ end }}
    {{ end }}
{{ end }}

<div class="tags">
    <div class="taxosfloating_left">
        <p>Tags</p>
    </div>
    <div class="termsfloating_right">
        <p>
        {{ range $tag := sort ($tagsScratch.Get "tags") }}
            {{ with $.Site.GetPage (printf "/tags/%s" $tag) }}
            <a href="{{ .Permalink }}">{{ $tag | urlize }}</a>
            {{ end }}
        {{ end }}
        </p>
    </div>
</div>
<div class="clearit"></div>
{{ end }}
